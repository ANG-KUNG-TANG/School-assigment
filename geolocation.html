<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Distance to Kasem Bundit University</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
    background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
    padding: 20px;
    text-align: center;
  }
  button {
    background-color: #3182ce;
    color: white;
    border: none;
    padding: 15px 28px;
    font-size: 1.2rem;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s;
    margin-bottom: 20px;
  }
  button:hover {
    background-color: #2c5282;
  }
  #message {
    font-size: 1.5rem;
    color: #2d3748;
    min-height: 2em;
  }
</style>
</head>
<body>

<h1>Find Your Distance to Kasem Bundit University</h1>
<button id="locateBtn">Where am I?</button>
<div id="message"></div>

<script>
  const locateBtn = document.getElementById('locateBtn');
  const message = document.getElementById('message');

  // Kasem Bundit University coordinates
  const universityLat = 13.7563;
  const universityLng = 100.5678;

  function toRadians(deg) {
    return deg * Math.PI / 180;
  }

  // Haversine formula to calculate distance between two lat/lng points in km
  function calculateDistance(lat1, lng1, lat2, lng2) {
    const R = 6371; // Radius of Earth in km
    const dLat = toRadians(lat2 - lat1);
    const dLng = toRadians(lng2 - lng1);

    const a = Math.sin(dLat / 2) ** 2 +
              Math.cos(toRadians(lat1)) * Math.cos(toRadians(lat2)) *
              Math.sin(dLng / 2) ** 2;

    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));

    return R * c;
  }

  locateBtn.addEventListener('click', () => {
    if (!navigator.geolocation) {
      message.textContent = "⚠️ Geolocation is not supported by your browser.";
      message.style.color = "red";
      return;
    }

    message.textContent = "Getting your location...";
    message.style.color = "#2d3748";

    navigator.geolocation.getCurrentPosition(
      position => {
        const userLat = position.coords.latitude;
        const userLng = position.coords.longitude;

        const distance = calculateDistance(userLat, userLng, universityLat, universityLng);
        message.textContent = `You're ${distance.toFixed(2)} km away from Kasem Bundit University.`;
      },
      error => {
        switch(error.code) {
          case error.PERMISSION_DENIED:
            message.textContent = "⚠️ Permission denied. Please allow location access.";
            break;
          case error.POSITION_UNAVAILABLE:
            message.textContent = "⚠️ Location information is unavailable.";
            break;
          case error.TIMEOUT:
            message.textContent = "⚠️ The request to get your location timed out.";
            break;
          default:
            message.textContent = "⚠️ An unknown error occurred.";
        }
        message.style.color = "red";
      },
      { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
    );
  });
</script>

</body>
</html>
